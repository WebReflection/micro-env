[].indexOf||(Array.prototype.indexOf=function(e){for(var t=this.length;t--&&this[t]!==e;);return t});Function.bind||(Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}});Object.prototype.emit=function(e){for(var t=this._h,n=t?t["_"+e]:[],r=n.slice.call(arguments,1),i=0,s;i<n.length;s.apply(this,r))s=n[i++]};Object.prototype.off=function(e,t){var n=this._h,r=n&&n["_"+e],i=r&&r.indexOf(t);return~i&&r.splice(i,1),this};Object.prototype.on=function(e,t){var n=this._h||(this._h={}),r=n["_"+e]||(n["_"+e]=[]);return~r.indexOf(t)||r.push(t),this};Object.prototype.once=function(e,t){return this.on(e,function n(){this.off(e,n),t.apply(this,arguments)})};